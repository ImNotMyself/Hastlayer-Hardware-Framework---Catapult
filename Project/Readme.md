# Hastlayer Hardware Framework - Catapult readme



The [Hastlayer](http://hastlayer.com/) FPGA-side for [Project Catapult](https://www.microsoft.com/en-us/research/academic-program/project-catapult-academic-program/) FPGAs.


## Getting started

On the Catapult node clone this repository to a subfolder of *E:\catapult\v1.2\Roles\* (the default Catapult location, which you should use) with a folder name something like *HastlayerHardwareFramework-Catapult*. Make sure that the folder is not read-only.

## PowerShell scripts                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
We use PowerShell on TACC Catapult Nodes. PowerShell is a Windows command line shell that is much more advanced than the basic Command Prompt (cmd). There are some applications available on the Catapult Nodes that we can use via PowerShell - like FpgaDiagnostics or RSU (for FPGA reconfiguration) - and also some PowerShell scripts - like genRpd - that help us to to automate the tasks to be performed frequently. We also create such scripts to speed up work. 
So far the following scripts has been made:                                                                                                                                                                                                                                                                                                                                                                                                                                 
- **Hastlayer_programmer.ps1:** The script is located at *E:\catapult\v1.2\Roles\HastlayerHardwareFramework-Catapult\*                                                                                                                                                                                                                                                                                                                                                      
**Usage of the script:** Run the PowerShell as administrator (Right click on it in the Catapult Desktop, and choose Run as administrator). Navigate to the appropriate folder by typing the following: cd E:\catapult\v1.2\Roles\HastlayerHardwareFramework-Catapult\ . When you are there, run the script with .\Hastlayer_programmer.ps1.                                                                                                                                 
**Script functionality:** This script first deletes the old hastlayerhardware.rpd file, and then genetates a new hastlayerhardware.rpd from the Project.sof file (located at *HastlayerHardwareFramework-Catapult\Project\output_files\*) using the genRpd.ps1 script too. After these, it overwrites the Catapult FPGA board's flash memory with the new .rpd file, then reconfigures the FPGA.              
                                                              